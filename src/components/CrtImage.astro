---
const { src, alt, width, height } = Astro.props;
---

<div>
  <img style={`width: ${width}px; height: ${height}px;`} src={src} alt={alt} />
</div>

<style>
  img {
    opacity: 80%;
    object-fit: cover;
    image-rendering: pixelated;

    animation: phosphorFlicker 0.1s infinite alternate;
  }

  div {
    position: relative;
    display: inline-block;
  }

  div::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;

    background: linear-gradient(
      90deg,
      rgba(255, 0, 0, 0.08),
      rgba(0, 255, 0, 0.06),
      rgba(0, 0, 255, 0.08)
    );

    mix-blend-mode: color;
    animation: colorOverlayFlicker 3s infinite;
  }

  @keyframes colorOverlayFlicker {
    0% {
      opacity: 0.1;
    }
    10% {
      opacity: 0.35;
    }
    15% {
      opacity: 0.05;
    }
    20% {
      opacity: 0.3;
    }
    100% {
      opacity: 0.1;
    }
  }

  @keyframes phosphorFlicker {
    0% {
      filter: brightness(1) saturate(1);
    }

    10% {
      filter: brightness(1.1) saturate(1.4) hue-rotate(-3deg);
    }

    15% {
      filter: brightness(0.8) saturate(0.8) hue-rotate(3deg);
    }

    20% {
      filter: brightness(1.05) saturate(1.3) hue-rotate(-1deg);
    }

    100% {
      filter: brightness(1) saturate(1);
    }
  }
</style>
